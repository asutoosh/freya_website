# AZURE QUICK START - 5 Minutes to Deploy

## Prerequisites
- Azure account (sign up at portal.azure.com)
- Azure CLI installed
- Git initialized in your project

---

## ‚ö†Ô∏è IMPORTANT: Resource Group Location

**Your Setup:**
- **Resource Group:** `freya-trades-rg` (location: eastus) ‚úÖ Already exists
- **App Service Plan:** `freya-trades-plan` (location: centralindia) ‚úÖ
- **Web App:** `freya-trades` (location: centralindia) ‚úÖ

**This is CORRECT and expected!**
- Resource group location ‚â† resource location
- Azure allows resources in different regions than their resource group
- You can SKIP the `az group create` step (it already exists)

---

## Quick Deploy Commands

```powershell
# 1. Login to Azure
az login

# 2. Set variables
$RESOURCE_GROUP="freya-trades-rg"  # Already exists in eastus
$APP_NAME="freya-trades"
$LOCATION="centralindia"  # Resources will be in Central India

# 3. SKIP resource group creation (already exists)
# az group create... <- SKIP THIS

# 4. Create App Service Plan (in Central India)
az appservice plan create `
  --name "$APP_NAME-plan" `
  --resource-group $RESOURCE_GROUP `
  --location $LOCATION `
  --sku B1 `
  --is-linux

# 5. Create Web App (in Central India)
az webapp create `
  --resource-group $RESOURCE_GROUP `
  --plan "$APP_NAME-plan" `
  --name $APP_NAME `
  --runtime "NODE:20-lts"

# 6. Set environment variables (USE AZURE PORTAL - see FIX_ENV_VARS.txt)
# Or use this command:
az webapp config appsettings set -g $RESOURCE_GROUP -n $APP_NAME --settings "IP2LOCATION_API_KEY=12DC6E9184F7FD5D9F8502A4844D8DCA" "BLOCKED_COUNTRY_CODE=IN" "NODE_ENV=production"

# 5. Configure deployment
az webapp deployment source config-local-git `
  --name $APP_NAME `
  --resource-group $RESOURCE_GROUP

# 6. Get deployment URL
$deployUrl = az webapp deployment list-publishing-credentials `
  --name $APP_NAME `
  --resource-group $RESOURCE_GROUP `
  --query scmUri `
  --output tsv

# 7. Deploy
git remote add azure $deployUrl
git add .
git commit -m "Deploy to Azure"
git push azure main
```

---

## Add Custom Domains

```powershell
# Add domains
az webapp config hostname add `
  --webapp-name $APP_NAME `
  --resource-group $RESOURCE_GROUP `
  --hostname freyatrades.page

az webapp config hostname add `
  --webapp-name $APP_NAME `
  --resource-group $RESOURCE_GROUP `
  --hostname live.freyatrades.page

# Enable HTTPS
az webapp config ssl bind `
  --name $APP_NAME `
  --resource-group $RESOURCE_GROUP `
  --certificate-thumbprint auto `
  --ssl-type SNI `
  --hostname freyatrades.page

az webapp config ssl bind `
  --name $APP_NAME `
  --resource-group $RESOURCE_GROUP `
  --certificate-thumbprint auto `
  --ssl-type SNI `
  --hostname live.freyatrades.page
```

---

## DNS Configuration

**In your domain registrar:**

**freyatrades.page:**
```
Type: A
Name: @
Value: <Get from: az webapp show --name $APP_NAME --resource-group $RESOURCE_GROUP --query outboundIpAddresses>
```

**live.freyatrades.page:**
```
Type: CNAME
Name: live
Value: freya-trades.azurewebsites.net
```

---

## Test Your Deployment

- Landing: https://freyatrades.page
- Protected: https://live.freyatrades.page/money-glitch

---

## Update After Changes

```powershell
git add .
git commit -m "Update"
git push azure main
```

---

**Done! Your site is live on Azure! üöÄ**

For detailed instructions, see AZURE_DEPLOY.txt
